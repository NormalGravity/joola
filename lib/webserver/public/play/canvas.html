<!DOCTYPE html>
<html xmlns:joola="http://joo.la/ns/1.0">
<head lang="en">
  <meta charset="UTF-8">
  <title></title>
  <script src="/joola.js?APIToken=apitoken-demo"></script>
  <style>
    .clearfix {
      clear: both
    }

    #metric1, #metric2, #metric3 {
      float: left;
      width: 33%;
    }

    #bartable1, #bartable2, #bartable3 {
      float: left;
      width: 33%;
    }
  </style>
</head>
<body>
<div id="canvas">
  <div id="filters"></div>
  <div class="clearfix"></div>
  <div id="datepicker"></div>
  <div class="clearfix"></div>
  <div id="metric1"></div>
  <div id="metric2"></div>
  <div id="metric3"></div>
  <div class="clearfix"></div>
  <div id="bartable1"></div>
  <div id="bartable2"></div>
  <div id="bartable3"></div>
  <div class="clearfix"></div>
</div>
<div id="canvas2">
  <div id="datepicker2"></div>
  <div class="clearfix"></div>
  <div id="bartable4"></div>
  <div id="bartable5"></div>
</div>

<script>
  joola.on('ready', function () {
    new joola.viz.Canvas({
      container: '#canvas',
      datepicker: {
        container: '#datepicker'
      },
      filterbox: {
        container: '#filters'
      },
      visualizations: {
        bartable1: {
          type: 'bartable',
          caption: 'Mouse moves',
          container: '#bartable1',
          query: {
            dimensions: [{key:'browser', name:'Browser'}],
            metrics: ['mousemoves'],
            collection: 'demo-mousemoves',
            orderby: [
              ['mousemoves', 'DESC']
            ],
            realtime:true
          },
          /*select: function (ref) {
            console.log('select', ref);
          }*/
        },
        bartable2: {
          type: 'bartable',
          caption: 'Clicks',
          container: '#bartable2',
          query: {
            dimensions: ['engine'],
            metrics: ['clicks'],
            collection: 'demo-clicks',
            orderby: [
              ['clicks', 'DESC']
            ],
            realtime:true
          },
          //select: false
        },
        bartable3: {
          type: 'bartable',
          caption: 'Visits',
          container: '#bartable3',

          query: {
            dimensions: ['browser'],
            metrics: ['visits'],
            collection: 'demo-visits',
            orderby: [
              ['visits', 'DESC']
            ],
            realtime:true
          }
        },
        metric1: {
          type: 'metric',
          caption: 'Mouse moves',
          container: '#metric1',
          query: {
            metrics: ['mousemoves'],
            collection: 'demo-mousemoves'
          }
        },
        metric2: {
          type: 'metric',
          caption: 'Clicks',
          container: '#metric2',
          query: {
            metrics: ['clicks'],
            collection: 'demo-clicks'
          }
        },
        metric3: {
          type: 'metric',
          caption: 'Visits',
          container: '#metric3',
          query: {
            metrics: ['visits'],
            collection: 'demo-visits'
          }
        }
      }
    });


    new joola.viz.Canvas({
      container: '#canvas2',
      datepicker: {
        container: '#datepicker2'
      },
      visualizations: {
        bartable4: {
          type: 'bartable',
          caption: 'Limit',
          container: '#bartable4',
          limit: 1,
          strings: {
            not_shown: 'not shown'
          },
          query: {
            dimensions: ['browser'],
            metrics: ['mousemoves'],
            collection: 'demo-mousemoves',
            orderby: [
              ['mousemoves', 'DESC']
            ]
          }
        },
        bartable5: {
          type: 'bartable',
          caption: 'Limit w/o "not shown"',
          container: '#bartable5',
          limit: 1,
          strings: {
            not_shown: 'not shown'
          },
          include_not_shown: false,
          query: {
            dimensions: ['browser'],
            metrics: ['mousemoves'],
            collection: 'demo-mousemoves',
            orderby: [
              ['mousemoves', 'DESC']
            ]
          }
        }
      }
    });
  });
</script>

</body>
</html>