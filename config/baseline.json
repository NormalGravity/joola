{
  "id": "joola.io-config-baseline",
  "description": "This is a baseline configuration file for joola.io",
  "moreinfo": "https://github.com/joola/joola.io/wiki",

  "_version": "0.0.1",
  "general": {
    "adminemail": "info@joo.la",
    "dateformat": "YYYY-mm-dd hh:ii:ss",
    "systemname": "joola"
  },
  "interfaces": {
    "webserver": {
      "enabled": true,
      "host": "localhost",
      "port": 8080,
      "securePort": 8081,
      "secure": false,
      "keyFile": null,
      "certFile": null,
      "websocket": {
        "enabled": true
      },
      "sessionDurtaion": 1200000
    },
    "repl": {
      "enabled": true,
      "port": "1337"
    },
    "beacon": {
      "enabled": true,
      "port": "50008"
    }
  },
  "store": {
    "config": {
      "redis": {
        "host": "localhost",
        "port": 6379,
        "db": 0,
        "pass": null
      }
    },
    "dispatch": {
      "redis": {
        "host": "localhost",
        "port": 6379,
        "db": 1,
        "pass": null
      }
    },
    "socketio": {
      "redis": {
        "host": "localhost",
        "port": 6379,
        "db": 2,
        "pass": null
      }
    },
    "runtime": {
      "redis": {
        "host": "localhost",
        "port": 6379,
        "db": 3,
        "pass": null
      }
    },
    "stats": {
      "mongo": {
        "host": "localhost",
        "port": 27017,
        "user": null,
        "password": null,
        "db": "stats"
      }
    },
    "logger": {
      "mongo": {
        "level": "trace",
        "host": "localhost",
        "port": 27017,
        "user": null,
        "password": null,
        "db": "logger"
      },
      "file": {
        "level": "trace",
        "path": "/tmp/joola.io/"
      }
    },
    "beacon": {
      "mongo": {
        "host": "localhost",
        "port": 27017,
        "user": null,
        "password": null,
        "db": "beacon"
      }
    },
    "cache": {
      "mongo": {
        "host": "localhost",
        "port": 27017,
        "user": null,
        "password": null,
        "db": "cache"
      }
    }
  },
  "engine": {
    "cache": {
      "lockTimeout": 5000,
      "waitOnCache": 5000,
      "waitInterval": 500
    },
    "query": {
      "results": {
        "cache": {
          "enabled": false,
          "expire": 0
        }
      }
    }
  },
  "dispatch": {
    "ttl": 5000,
    "expires": 6
  },
  "authentication": {
    "store": "internal",
    "bypassToken": "123",
    "tokens": {
      "expireAfter": 1200000
    },
    "roles": {
      "admin": {
        "name": "admin",
        "permissions": ["access_system", "manage_system"],
        "filter": ""
      },
      "user": {
        "name": "user",
        "permissions": ["access_system"],
        "filter": ""
      }
    },
    "users": {
      "admin": {
        "username": "admin",
        "_password": "password",
        "_roles": ["admin", "user"],
        "displayName": "Administrator",
        "organization": "joola"
      },
      "demo": {
        "username": "demo",
        "_password": "password",
        "_roles": ["user"],
        "displayName": "demo user",
        "organization": "joola"
      }
    },
    "organizations": {
      "joola": {
        "name": "joola"
      }
    }
  },
  "datamap": {
    "mode": "promiscuous",
    "dimensions": {
      "timestamp": {
        "id": "timestamp",
        "name": "Timestamp",
        "type": "date"
      },
      "second": {
        "id": "date",
        "name": "Date",
        "type": "date",
        "dependsOn": "timestamp",
        "alias": "timebucket.second"
      },
      "date": {
        "id": "date",
        "name": "Date",
        "type": "date",
        "dependsOn": "timestamp",
        "alias": "timebucket.date"
      }
    },
    "metrics": {
      "bc2mv": {
        "id": "bc2mv",
        "name": "Blockchain/MouseMove",
        "type": "float",
        "formula": {
          "dependsOn": ["bccount", "mvcount"],
          "run": "function(bccount, mvcount){return bccount/mvcount;}"
        }
      }
    },
    "collections": {
      "mousemove": {
        "id": "POC-mousemove",
        "dimensions": {
          "timestamp": {
            "id": "timestamp",
            "name": "Timestamp",
            "mapto": "timestamp"
          },
          "x": {
            "id": "x",
            "name": "Position X",
            "type": "string"
          },
          "y": {
            "id": "y",
            "name": "Position Y",
            "type": "string"
          }
        },
        "metrics": {
          "mvcount": {
            "id": "mvcount",
            "name": "Mousemove Count",
            "type": "int",
            "aggregation": "count"
          }
        }
      },
      "blockchain": {
        "id": "POC-blockchain",
        "dimensions": {
          "timestamp": {
            "id": "timestamp",
            "name": "Timestamp",
            "mapto": "timestamp"
          },
          "hash": {
            "id": "hash",
            "name": "TX Hash",
            "type": "string"
          },
          "relayed_by": {
            "id": "relayed_by",
            "name": "TX Relayed By",
            "type": "ip"
          }
        },
        "metrics": {
          "inamount": {
            "id": "inamount",
            "name": "In amount",
            "type": "float",
            "aggregation": "sum",
            "suffix": "BTC"
          },
          "outamount": {
            "id": "outamount",
            "name": "Out amount",
            "type": "float",
            "aggregation": "sum",
            "suffix": "BTC"
          },
          "delta": {
            "id": "delta",
            "name": "Delta",
            "type": "float",
            "aggregation": "sum",
            "suffix": "BTC"
          },
          "bccount": {
            "id": "bccount",
            "name": "TX Count",
            "type": "int",
            "aggregation": "count",
            "prefix": "TX #."
          },
          "relaycount": {
            "id": "relaycount",
            "name": "Unique Count of Relays",
            "type": "int",
            "aggregation": "ucount",
            "dependsOn": "relayed_by"
          }
        }
      }
    }
  }
}
